---
import Layout from "@layouts/Layout.astro";
import site from "../config/site";
import Entry from "@components/Entry.astro";
import { getCollection } from "astro:content";
import style from "../styles/archive.module.css";
import landingStyle from "../styles/landing.module.css";
import { Image } from "astro:assets";
import coverimage from "../images/avatar5-nobg.png";
import { readingTime } from "@lib/utils";

const data1 = (await getCollection("notes"))
  .filter((note) => note.data.featured && !note.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
const data2 = (await getCollection("articles"))
  .filter((article) => article.data.featured && !article.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
const data3 = (await getCollection("bibliophilediaries"))
  .filter((entry) => entry.data.featured && !entry.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

const data = [...data1, ...data2, ...data3];

const fdata1 = (await getCollection("notes")).filter(
  (note) => !note.data.draft,
);
const fdata2 = (await getCollection("articles")).filter(
  (article) => !article.data.draft,
);
const fdata3 = (await getCollection("bibliophilediaries")).filter(
  (entry) => !entry.data.draft,
);

const fdata = [...fdata1, ...fdata2, ...fdata3]
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 6);
---

<Layout
  description={site.description}
  pageType="home"
  includeLocalBusiness={true}
  path="/"
>
  <main id="main" class={style.main}>
    <div class={landingStyle.title}>
      <h1 class={style.heading}>
        <span>
          <strong>Automate Your Operations.</strong><br />
          <strong>Own Your Tools.</strong><br />
          I help creative agencies and teams integrate AI workflows & open-source
          solutions to reclaim thousands of productive hours.
        </span>
      </h1>
      <!-- <div class={style.intro}>
        <p>
          I'm a multi-talented human with over 11+ years of experience in a wide
          range of design disciplines. I have designed, built and tinkered with
          digital products for a considerable time. I'm currently self-employed
          and am working with a selected freelance client base.
        </p>
      </div> -->
      <Image
        src={coverimage}
        alt="Cover showing aside profile of Alok Prateek"
        loading="eager"
        class={landingStyle.cover}
        style="background-color: transparent"
      />
    </div>
    <div class={style.content}>
      <h2 class={style.subHeading}>
        <span>Stop Juggling Tasks. Start Scaling Your Business.</span>
      </h2>
      <div>
        <p>
          As a business owner, your time is your most valuable asset. Yet, how much of it is lost to the daily grind of social media updates, disconnected apps, and repetitive manual work that keeps you from focusing on real growth?
        </p>
        <p>
          Put simply, I build intelligent systems to reclaim that time.
        </p>
        <p>My approach is simple: we start by automating the tasks that consume your teams valuable time, then we scale small wins to transform your core operations. I integrate powerful, private AI and robust automation to make your business run more efficiently, so you can focus on the vision.
        </p>
        <p>
          <strong>How I can help you:</strong>
        </p>
        <ul style={{ marginLeft: "3ch" }}>
          <li><strong>AI-Powered Marketing:</strong> I'll build and manage an automated content engine that creates and posts engaging social media content for you, consistently attracting new customers while you focus on serving them.</li>
          <li><strong>Custom Automation Systems:</strong> I connect your existing software, design custom APIs, and connect them to eliminate bottlenecks in your operations — from client onboarding to data processing.</li>
          <li><strong>Whitelabel & Open-Source Solutions:</strong> Own your software stack. I deploy and manage powerful, secure open-source alternatives to expensive SaaS products, giving you full control over your data and budget.</li>
        </ul>
        <p>
          Ready to build a more efficient business?
        </p>
        <div style={{ textAlign: "center" }}>
          <a
            href="/contact/"
            class="btn"
            style={{ fontSize: "larger", marginBottom: "4em" }}
          >
            Book a free Automation Audit
          </a>
        </div>
      </div>
      <h2 class={style.subHeading}>
        <span>Recent posts</span>
      </h2>
      <div class={style.gridList}>
        {
          fdata.map((node) => (
            <Entry
              title={node.data.title}
              date={node.data.date.toString()}
              path={"/" + node.collection + "/" + node.slug}
              timeToRead={readingTime(node.body)}
              excerpt={node.data.excerpt}
              tags={node.data.tags}
            />
          ))
        }
      </div>

      <h2 class={style.subHeading}>
        <span>Featured articles</span>
      </h2>
      <div class={style.gridList}>
        {
          data.map((node) => (
            <Entry
              title={node.data.title}
              date={node.data.date.toString()}
              path={"/" + node.collection + "/" + node.slug}
              timeToRead={readingTime(node.body)}
              excerpt={node.data.excerpt}
              tags={node.data.tags}
            />
          ))
        }
      </div>

      <h2 class={style.subHeading}>
        <span>Explore more on this site</span>
      </h2>
      <div>
        <ul class={`${style.gridListExpanded} ${style.navList}`}>
          <li id="services">
            <Entry
              key="services-home-link"
              title="Services"
              path="/services/"
              excerpt="Services I offer to help you with your business. Explore how I can help you."
            />
          </li>
          <li id="articles">
            <Entry
              key="articles-home-link"
              title="Articles"
              path="/articles/"
              excerpt="Long pieces of text mostly about design and web development."
            />
          </li>
          <li id="notes">
            <Entry
              key="notes-home-link"
              title="Notes"
              path="/notes/"
              excerpt="Rants, inspiration, thoughts, and other things you should find in a blog."
            />
          </li>
          <li id="works">
            <Entry
              key="works-home-link"
              title="Works"
              path="/works/"
              excerpt="Hand-picked selection of things I've designed, illustrated, and developed."
            />
          </li>
          <!-- <li id="bibliophile-diaries">
            <Entry
              key="bibliophile-diaries-home-link"
              title="Bibliophile Diaries"
              path="/bibliophilediaries/"
              excerpt="Lessons and interesting quotes from books I've read."
            />
          </li> -->
          <li id="contact">
            <Entry
              key="contact-home-link"
              title="Contact"
              path="/contact/"
              excerpt="Ideal ways of sending questions, messages, and love letters to me."
            />
          </li>
          <li id="support">
            <Entry
              key="support-home-link"
              title="Show your support"
              path="/support/"
              excerpt="Buy me a coffee or maybe why not buy me a tree?"
            />
          </li>
          <li id="faqs">
            <Entry
              key="faqs-home-link"
              title="Frequently asked questions"
              path="/faqs/"
              excerpt="There’s no such thing as a dumb question…"
            />
          </li>
          <li id="topics">
            <Entry
              key="topics-home-link"
              title="All topics"
              path="/tag/"
              excerpt="Archive of all posts organized by topic."
            />
          </li>
        </ul>
      </div>
    </div>
  </main>


</Layout>
